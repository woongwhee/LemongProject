<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="emailConfirmMapper">

    <!--  이메일 인증  -->
    <resultMap id="emailConfirmResultSet" type="EmailConfirm">
        <result column="CONFIRM_NO" property="confirmNo" />
        <result column="CODE" property="code" />
        <result column="EMAIL" property="email" />
        <result column="CONFIRM_AT" property="confirmDate" />
        <result column="STATUS" property="status" />
    </resultMap>

    <!-- 이메일 체크 -->
    <select id="checkEmail" parameterType="Map" resultType="int">
        SELECT COUNT(*) AS COUNT
        FROM EMAIL_CONFIRM
        WHERE EMAIL = #{email}
    </select>


    <!--  이메일 체크 삽입  -->
    <insert id="insertEmail" parameterType="Map">
        INSERT INTO EMAIL_CONFIRM (CONFIRM_NO, CODE, EMAIL, STATUS)
        VALUES(SEQ_CONFIRM.NEXTVAL, #{code}, #{email}, DEFAULT)
    </insert>


    <!-- 이메일 체크 삭제 -->
    <delete id="deleteEmail" parameterType="Map">
        DELETE FROM EMAIL_CONFIRM
        WHERE EMAIL = #{email}
    </delete>



</mapper>